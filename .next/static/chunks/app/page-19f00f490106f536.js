(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2900:(e,t,r)=>{Promise.resolve().then(r.bind(r,9938))},9938:(e,t,r)=>{"use strict";r.d(t,{default:()=>O});var s=r(5155),a=r(2115),l=r(6710),n=r(3500),o=r(2744),i=r(5686);function d(e){let{conversations:t,selectedConversation:r,onSelectConversation:d,onUpdateConversations:c,onDeleteConversation:g,onPinConversation:u}=e,[h,m]=a.useState(!1),x=[...t].sort((e,t)=>e.pinned&&!t.pinned?-1:!e.pinned&&t.pinned?1:t.updatedAt-e.updatedAt);return(0,s.jsxs)("div",{className:"border-r border-gray-200 dark:border-gray-800 ".concat(h?"w-16":"w-64"," transition-all duration-200"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800",children:[!h&&(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Chats"}),(0,s.jsx)("button",{onClick:()=>m(!h),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:(0,s.jsx)(l.A,{size:20})})]}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("button",{onClick:()=>{let e={id:Date.now().toString(),title:"New Chat",messages:[],createdAt:Date.now(),updatedAt:Date.now()};c([...t,e]),d(e)},className:"flex items-center justify-center w-full p-2 text-sm bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700",children:[(0,s.jsx)(n.A,{size:16,className:"mr-2"}),!h&&"New Chat"]})}),(0,s.jsx)("div",{className:"overflow-y-auto",children:x.map(e=>(0,s.jsxs)("div",{className:"group flex items-center p-4 hover:bg-gray-100 dark:hover:bg-gray-800 ".concat((null==r?void 0:r.id)===e.id?"bg-gray-100 dark:bg-gray-800":""),children:[(0,s.jsx)("button",{onClick:()=>d(e),className:"flex-1 text-left truncate",children:!h&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.pinned&&(0,s.jsx)(o.A,{size:12}),(0,s.jsx)("span",{className:"truncate",children:e.title})]})}),!h&&(0,s.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>u(e.id),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded",children:(0,s.jsx)(o.A,{size:14,className:e.pinned?"fill-current":""})}),(0,s.jsx)("button",{onClick:()=>g(e.id),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-red-500",children:(0,s.jsx)(i.A,{size:14})})]})]},e.id))})]})}var c=r(8283);let g={CONVERSATIONS:"ai-chat-conversations",SETTINGS:"ai-chat-settings"};function u(e){localStorage.setItem(g.CONVERSATIONS,JSON.stringify(e))}function h(){let e=localStorage.getItem(g.SETTINGS);return e?JSON.parse(e):{theme:"system",model:"gpt-3.5-turbo",apiKey:""}}async function m(e,t,r){let s=h();if(!s.apiKey)throw Error("API key not found. Please add your API key in settings.");try{var a;let l=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,apiKey:s.apiKey,model:s.model}),signal:r});if(!l.ok){let e=await l.json();throw Error(e.error||"Failed to send message")}let n=null===(a=l.body)||void 0===a?void 0:a.getReader(),o=new TextDecoder,i="";for(;n;){let{done:e,value:r}=await n.read();if(e)break;let s=o.decode(r);i+=s,null==t||t(s)}return i}catch(e){throw console.error("API call failed:",e),e}}async function x(e){let t=h();if(!t.apiKey)throw Error("API key not found");let r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.apiKey)},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"Generate a short, concise title (max 6 words) for this conversation based on the user message."},{role:"user",content:e}],max_tokens:20})});return(await r.json()).choices[0].message.content.trim()}var p=r(6972);class b extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){if(this.state.hasError){var e;return(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg max-w-md",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[(0,s.jsx)(p.A,{size:20}),(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Something went wrong"})]}),(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred"}),(0,s.jsx)("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"mt-4 px-4 py-2 bg-red-100 dark:bg-red-900/40 text-red-600 dark:text-red-400 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/60",children:"Try again"})]})})}return this.props.children}constructor(e){super(e),this.state={hasError:!1,error:null}}}var v=r(4206),f=r(8867),y=r(3920);function j(e){let{text:t}=e,[r,l]=a.useState(!1),n=async()=>{await navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3)};return(0,s.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg transition-colors","aria-label":"Copy to clipboard",children:r?(0,s.jsx)(f.A,{size:16,className:"text-green-500"}):(0,s.jsx)(y.A,{size:16,className:"text-gray-500"})})}function N(){return(0,s.jsx)("div",{className:"w-6 h-6 mr-2 flex-shrink-0",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 2a2 2 0 0 1 2 2v2h3a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h3V4a2 2 0 0 1 2-2zm0 4H7a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1h-5zm-1 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm2 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm2 4H9v2h6v-2z"})})})}let w=["How do I get started with web development?","Explain Docker containers simply","What are the key features of TypeScript?","How to implement authentication in Next.js?","Best practices for React performance","Explain microservices architecture","How to use Git effectively?","What is CI/CD pipeline?","Explain machine learning in simple terms","Latest developments in AI technology","How does natural language processing work?","What is deep learning?","Explain neural networks simply","What are data structures?","Explain Big O notation","How does blockchain work?","What is cloud computing?","Explain quantum computing basics","How to become a better programmer?","Tips for coding interviews","Best resources for learning Python","How to contribute to open source?","Career path for becoming a data scientist"];function k(e){let{conversation:t,onUpdateConversation:r}=e,[l,n]=a.useState(""),[o,i]=a.useState(!1),[d,g]=a.useState(!1),[u,h]=a.useState(null),p=a.useRef(null),[f,y]=a.useState(null),[k,S]=a.useState([]),C=()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{C()},[null==t?void 0:t.messages]),a.useEffect(()=>{(null==t?void 0:t.messages.length)||S(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return[...w].sort(()=>.5-Math.random()).slice(0,e)}())},[t]);let A=async e=>{if(e.preventDefault(),!l.trim()||!t)return;let s=new AbortController;y(s),i(!0),g(!1),h(null);try{if(0===t.messages.length){let e=await x(l);t.title=e}let e={id:Date.now().toString(),content:l,role:"user",timestamp:Date.now()},a={...t,messages:[...t.messages,e]};r(a),n("");let o={id:(Date.now()+1).toString(),content:"",role:"assistant",timestamp:Date.now()},d={...a,messages:[...a.messages,o]};r(d),i(!1),g(!0),await m(l,e=>{s.signal.aborted||(o.content+=e,r({...d,messages:d.messages.map(e=>e.id===o.id?o:e)}))},s.signal)}catch(e){if("AbortError"===e.name){let e=t.messages[t.messages.length-1];e&&"assistant"===e.role&&(e.content+="\n\n_Generation stopped._",r({...t,messages:t.messages}));return}h(e.message)}finally{g(!1),i(!1),y(null)}};return(0,s.jsx)(b,{children:(0,s.jsxs)("div",{className:"flex-1 flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-4 py-4",children:[(null==t?void 0:t.messages.length)===0?(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center px-4",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"How can I help you today?"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl w-full",children:k.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{n(e)},className:"p-4 text-left rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:e},t))})]}):(0,s.jsx)(s.Fragment,{children:null==t?void 0:t.messages.map(e=>(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"group relative max-w-[85%]",children:(0,s.jsx)("div",{className:"rounded-lg p-3 ".concat("user"===e.role?"bg-blue-500 text-white ml-auto":"bg-white dark:bg-gray-800 prose dark:prose-invert prose-sm"),children:"user"===e.role?e.content:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)(N,{}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(v.o,{children:e.content}),(0,s.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(j,{text:e.content})})]})]})})})},e.id))}),o&&!d&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg p-3",children:"Thinking..."})}),u&&(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-200 rounded-lg p-3",children:u})}),(0,s.jsx)("div",{ref:p})]}),(0,s.jsx)("form",{onSubmit:A,className:"p-4 border-t dark:border-gray-800",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),placeholder:"Type a message...",className:"flex-1 p-2 rounded-lg border dark:border-gray-700 dark:bg-gray-800",disabled:d}),d?(0,s.jsx)("button",{type:"button",onClick:()=>{f&&(f.abort(),g(!1),i(!1),y(null))},className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:"Stop"}):(0,s.jsx)("button",{type:"submit",disabled:!l.trim()||o,className:"p-2 bg-blue-500 text-white rounded-lg disabled:opacity-50 hover:bg-blue-600 transition-colors",children:(0,s.jsx)(c.A,{size:20})})]})})]})})}var S=r(767);function C(e){let{isOpen:t,onClose:r}=e,[l,n]=a.useState(h()),[o,i]=a.useState(!1),d=(e,t)=>{n(r=>({...r,[e]:t})),i(!0)};return(0,s.jsxs)("div",{className:"fixed inset-y-0 right-0 w-80 bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-800 transform transition-transform duration-200 ".concat(t?"translate-x-0":"translate-x-full"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Settings"}),(0,s.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:(0,s.jsx)(S.A,{size:20})})]}),(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"API Key"}),(0,s.jsx)("input",{type:"password",value:l.apiKey,onChange:e=>d("apiKey",e.target.value),className:"w-full p-2 rounded-lg border dark:border-gray-700 dark:bg-gray-800"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Model"}),(0,s.jsxs)("select",{value:l.model,onChange:e=>d("model",e.target.value),className:"w-full p-2 rounded-lg border dark:border-gray-700 dark:bg-gray-800",children:[(0,s.jsx)("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),(0,s.jsx)("option",{value:"gpt-4",children:"GPT-4"}),(0,s.jsx)("option",{value:"claude-3-opus",children:"Claude 3 Opus"}),(0,s.jsx)("option",{value:"claude-3-sonnet",children:"Claude 3 Sonnet"})]})]}),(0,s.jsx)("button",{onClick:()=>{localStorage.setItem(g.SETTINGS,JSON.stringify(l)),i(!1),r()},disabled:!o,className:"w-full p-2 bg-blue-500 text-white rounded-lg disabled:opacity-50 hover:bg-blue-600",children:"Save Changes"})]})]})}var A=r(8236),E=r(7725),T=r(2104),I=r(8872);function z(){let{theme:e,setTheme:t}=(0,I.D)(),[r,l]=a.useState(!1);return(a.useEffect(()=>{l(!0)},[]),r)?(0,s.jsx)("button",{onClick:()=>t("dark"===e?"light":"dark"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg","aria-label":"Toggle theme",children:"dark"===e?(0,s.jsx)(E.A,{size:20}):(0,s.jsx)(T.A,{size:20})}):(0,s.jsx)("div",{className:"w-9 h-9"})}function O(){let[e,t]=(0,a.useState)([]),[r,l]=(0,a.useState)(null),[n,o]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=function(){let e=localStorage.getItem(g.CONVERSATIONS);return e?JSON.parse(e):[]}();t(e),e.length>0&&l(e[0])},[]),(0,s.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,s.jsx)(d,{conversations:e,selectedConversation:r,onSelectConversation:l,onUpdateConversations:e=>{t(e),u(e)},onDeleteConversation:s=>{let a=e.filter(e=>e.id!==s);t(a),u(a),(null==r?void 0:r.id)===s&&l(a[0]||null)},onPinConversation:r=>{let s=e.map(e=>e.id===r?{...e,pinned:!e.pinned}:e);t(s),u(s)}}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold",children:(null==r?void 0:r.title)||"New Chat"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(z,{}),(0,s.jsx)("button",{onClick:()=>o(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:(0,s.jsx)(A.A,{size:20})})]})]}),(0,s.jsx)("div",{className:"flex-1 flex justify-center bg-gray-50 dark:bg-gray-900 overflow-hidden",children:(0,s.jsx)("div",{className:"w-full max-w-3xl px-4",children:(0,s.jsx)(k,{conversation:r,onUpdateConversation:r=>{let s=e.map(e=>e.id===r.id?r:e);t(s),u(s),l(r)}})})})]}),(0,s.jsx)(C,{isOpen:n,onClose:()=>o(!1)})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[725,441,517,358],()=>t(2900)),_N_E=e.O()}]);